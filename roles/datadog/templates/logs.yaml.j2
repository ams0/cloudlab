# Datadog Log Configuration
# Generated by Ansible - DO NOT EDIT MANUALLY

logs:
  # System logs - Using journald for Ubuntu 24.04
  - type: journald
    service: system
    source: systemd
    include_units:
      - ssh.service
      - systemd-logind.service
      - cron.service
      - systemd-resolved.service
    
  # Authentication logs via journald
  - type: journald
    service: system
    source: auth
    include_units:
      - ssh.service
      - sudo.service
      - systemd-logind.service
    
  # Kernel logs via journald  
  - type: journald
    service: system
    source: kernel
    include_units:
      - kernel

  # Application logs
  - type: file
    path: /var/log/nginx/*.log
    service: nginx
    source: nginx
    exclude_paths:
      - /var/log/nginx/*error*.log
    
  - type: file
    path: /var/log/nginx/*error*.log
    service: nginx
    source: nginx
    log_processing_rules:
      - type: multi_line
        name: new_log_start_with_date
        pattern: \d{4}\/\d{2}\/\d{2}

  # Docker logs (if Docker is installed)
  - type: docker
    service: docker
    source: docker