# Datadog Agent Configuration
# Generated by Ansible - DO NOT EDIT MANUALLY

# Core configuration
api_key: {{ datadog_api_key }}
site: {{ datadog_site }}

# Hostname configuration
{% if datadog_hostname != "" %}
hostname: {{ datadog_hostname }}
{% endif %}

# Tags
{% if datadog_tags | length > 0 %}
tags:
{% for tag in datadog_tags %}
  - {{ tag }}
{% endfor %}
{% endif %}

# Logs configuration
{% if datadog_logs_enabled %}
logs_enabled: true
logs_config:
  container_collect_all: false
{% else %}
logs_enabled: false
{% endif %}

# APM configuration
{% if datadog_apm_enabled %}
apm_config:
  enabled: true
  env: production
{% if datadog_apm_non_local_traffic %}
  non_local_traffic: true
{% endif %}
{% else %}
apm_config:
  enabled: false
{% endif %}

# Process Agent configuration
{% if datadog_process_agent_enabled %}
process_config:
  enabled: "true"
  scrub_args: true
  custom_sensitive_words: ['password', 'passwd', 'secret', 'key']
{% else %}
process_config:
  enabled: "disabled"
{% endif %}

# Network monitoring
{% if datadog_network_monitoring_enabled %}
network_config:
  enabled: true
{% endif %}

# System probe
{% if datadog_system_probe_enabled %}
system_probe_config:
  enabled: true
{% endif %}

# SSL configuration
{% if datadog_skip_ssl_validation %}
skip_ssl_validation: true
{% endif %}

# Additional configuration
{% if datadog_config | length > 0 %}
{% for key, value in datadog_config.items() %}
{{ key }}: {{ value }}
{% endfor %}
{% endif %}

# Inventory configuration
inventories_configuration_enabled: true

# Compliance monitoring
compliance_config:
  enabled: false

# Runtime security
runtime_security_config:
  enabled: false

# Cloud workload security
cloud_workload_security:
  enabled: false